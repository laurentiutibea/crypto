{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/laurentiu/Documents/crypto/client/pages/login.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport Head from \"next/head\";\nimport Link from 'next/link';\nimport auth from \"../services/authService\";\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      data: {\n        email: \"\",\n        password: \"\"\n      },\n      error: \"\"\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"validate\", function () {\n      return !(_this.state.data.email !== \"\" && _this.state.data.password !== \"\");\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (e) {\n      var data = _objectSpread({}, _this.state.data);\n\n      data[e.target.name] = e.target.value;\n\n      _this.setState({\n        data: data\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"doSubmit\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                _context.prev = 1;\n                data = _this.state.data;\n                _context.next = 5;\n                return auth.login(data.email, data.password);\n\n              case 5:\n                window.location.replace(\"/\");\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](1);\n\n                if (_context.t0.response && _context.t0.response.status === 400) {\n                  _this.setState({\n                    error: \"Wrong email or password!\"\n                  });\n                }\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 8]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", {\n        className: \"container\",\n        style: {\n          marginTop: \"15%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, __jsx(Head, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, __jsx(\"title\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, \"Login\"), __jsx(\"link\", {\n        rel: \"stylesheet\",\n        href: \"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\",\n        integrity: \"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\",\n        crossorigin: \"anonymous\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      })), __jsx(\"div\", {\n        className: \"card w-50 mx-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"card-body text-center pt-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, __jsx(\"h5\", {\n        className: \"card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, \"Login Page\"), __jsx(\"form\", {\n        onSubmit: this.doSubmit,\n        method: \"POST\",\n        className: \"m-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"form-group input\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, __jsx(\"input\", {\n        type: \"text\",\n        name: \"email\",\n        placeholder: \"Email\",\n        value: this.state.data.email,\n        onChange: this.handleChange,\n        className: \"form-control mb-3 mt-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }), __jsx(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"Password\",\n        value: this.state.data.password,\n        onChange: this.handleChange,\n        className: \"form-control mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }), __jsx(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, \"Create an account:\", __jsx(Link, {\n        href: \"/register\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, __jsx(\"span\", {\n        className: \"ml-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"Register\")))), __jsx(\"button\", {\n        disabled: this.validate(),\n        className: \"btn btn-success mt-2 mb-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, \"Login\"))), __jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, __jsx(\"p\", {\n        className: \"text-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, __jsx(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, this.state.error))))));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport { Login as default };","map":{"version":3,"sources":["/home/laurentiu/Documents/crypto/client/pages/login.js"],"names":["React","Component","Head","Link","auth","Login","data","email","password","error","state","e","target","name","value","setState","preventDefault","login","window","location","replace","response","status","marginTop","doSubmit","handleChange","validate"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Head from \"next/head\";\nimport Link from 'next/link';\n\nimport auth from \"../services/authService\";\n\nexport default class Login extends Component {\n    state = {\n        data: {\n            email: \"\",\n            password: \"\"\n        },\n        error: \"\"\n    }\n\n    validate = () => {\n        return !(this.state.data.email !== \"\" && this.state.data.password !== \"\");\n    };\n\n    handleChange = (e) => {\n        const data = {...this.state.data};\n        data[e.target.name] = e.target.value;\n        this.setState({data});\n    }\n\n    doSubmit = async (e) => {\n        e.preventDefault();\n        try{\n            const {data} = this.state;\n            await auth.login(data.email, data.password);\n\n            window.location.replace(\"/\");\n        }\n        catch(ex){\n            if(ex.response && ex.response.status === 400){\n                this.setState({error:\"Wrong email or password!\"});\n            }\n        }\n    }\n\n    render() {\n        \n\n        return (\n            <div className=\"container\" style={{marginTop:\"15%\"}}>\n                <Head>\n                    <title>Login</title>\n                    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\" integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\" crossorigin=\"anonymous\"/>\n                </Head>\n                <div className=\"card w-50 mx-auto\">\n                    <div className=\"card-body text-center pt-4\">\n                        <h5 className=\"card-title\">Login Page</h5>\n                        <form onSubmit={this.doSubmit} method=\"POST\" className=\"m-auto\">\n                            <div className=\"form-group input\">\n                                <input type=\"text\" name=\"email\" placeholder=\"Email\" value={this.state.data.email} onChange={this.handleChange} className=\"form-control mb-3 mt-2\"/>\n                                <input type=\"password\" name=\"password\" placeholder=\"Password\" value={this.state.data.password} onChange={this.handleChange} className=\"form-control mb-3\"/>\n                                <p>Create an account:\n                                    <Link href=\"/register\">\n                                        <a><span className=\"ml-2\">Register</span></a>\n                                    </Link>\n                                </p>\n                                <button disabled={this.validate()} className=\"btn btn-success mt-2 mb-2\">Login</button>\n                            </div>\n                        </form>\n                        <div>\n                            <p className=\"text-danger\"><strong>{this.state.error}</strong></p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}