{"ast":null,"code":"import http from \"./httpService\";\nimport { apiUrl } from \"../config\";\nimport jwtDecode from \"jwt-decode\";\nconst apiEndpoit = apiUrl + \"/auth\";\nconst tokenKey = \"token\";\nhttp.setJwt(getJwt());\nexport async function login(email, password) {\n  const {\n    data: jwt\n  } = await http.post(apiEndpoit, {\n    email,\n    password\n  });\n  localStorage.setItem(tokenKey, jwt);\n}\nexport async function confirmLogin(email, password) {\n  return await http.post(apiEndpoit, {\n    email,\n    password\n  });\n}\nexport function loginWithJwt(jwt) {\n  localStorage.setItem(tokenKey, jwt);\n}\nexport async function logout() {\n  localStorage.removeItem(tokenKey);\n}\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(\"token\");\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null;\n  }\n}\nexport function getJwt() {//const jwt = localStorage.getItem(tokenKey);\n  //return jwt;\n}\nexport default {\n  login,\n  confirmLogin,\n  loginWithJwt,\n  logout,\n  getCurrentUser,\n  getJwt\n};","map":{"version":3,"sources":["D:/WEB/crypto/client/services/authService.js"],"names":["http","apiUrl","jwtDecode","apiEndpoit","tokenKey","setJwt","getJwt","login","email","password","data","jwt","post","localStorage","setItem","confirmLogin","loginWithJwt","logout","removeItem","getCurrentUser","getItem","ex"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,eAAjB;AACA,SAAQC,MAAR,QAAqB,WAArB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AAEA,MAAMC,UAAU,GAAGF,MAAM,GAAG,OAA5B;AACA,MAAMG,QAAQ,GAAG,OAAjB;AAEAJ,IAAI,CAACK,MAAL,CAAYC,MAAM,EAAlB;AAEA,OAAO,eAAeC,KAAf,CAAqBC,KAArB,EAA4BC,QAA5B,EAAqC;AAC3C,QAAM;AAACC,IAAAA,IAAI,EAAEC;AAAP,MAAc,MAAMX,IAAI,CAACY,IAAL,CAAUT,UAAV,EAAsB;AAACK,IAAAA,KAAD;AAAQC,IAAAA;AAAR,GAAtB,CAA1B;AACAI,EAAAA,YAAY,CAACC,OAAb,CAAqBV,QAArB,EAA+BO,GAA/B;AACA;AAED,OAAO,eAAeI,YAAf,CAA4BP,KAA5B,EAAmCC,QAAnC,EAA4C;AAClD,SAAO,MAAMT,IAAI,CAACY,IAAL,CAAUT,UAAV,EAAsB;AAACK,IAAAA,KAAD;AAAQC,IAAAA;AAAR,GAAtB,CAAb;AACA;AAED,OAAO,SAASO,YAAT,CAAsBL,GAAtB,EAA0B;AAChCE,EAAAA,YAAY,CAACC,OAAb,CAAqBV,QAArB,EAA+BO,GAA/B;AACA;AAED,OAAO,eAAeM,MAAf,GAAuB;AAC7BJ,EAAAA,YAAY,CAACK,UAAb,CAAwBd,QAAxB;AACA;AAED,OAAO,SAASe,cAAT,GAAyB;AAC/B,MAAG;AACF,UAAMR,GAAG,GAAGE,YAAY,CAACO,OAAb,CAAqB,OAArB,CAAZ;AACA,WAAOlB,SAAS,CAACS,GAAD,CAAhB;AACA,GAHD,CAIA,OAAMU,EAAN,EAAS;AACR,WAAO,IAAP;AACA;AACD;AAED,OAAO,SAASf,MAAT,GAAiB,CACvB;AACA;AACA;AAED,eAAc;AACbC,EAAAA,KADa;AAEbQ,EAAAA,YAFa;AAGbC,EAAAA,YAHa;AAIbC,EAAAA,MAJa;AAKbE,EAAAA,cALa;AAMbb,EAAAA;AANa,CAAd","sourcesContent":["import http from \"./httpService\";\r\nimport {apiUrl} from \"../config\";\r\nimport jwtDecode from \"jwt-decode\";\r\n\r\nconst apiEndpoit = apiUrl + \"/auth\";\r\nconst tokenKey = \"token\";\r\n\r\nhttp.setJwt(getJwt());\r\n\r\nexport async function login(email, password){\r\n\tconst {data: jwt} = await http.post(apiEndpoit, {email, password});\r\n\tlocalStorage.setItem(tokenKey, jwt);\r\n}\r\n\r\nexport async function confirmLogin(email, password){\r\n\treturn await http.post(apiEndpoit, {email, password});\r\n}\r\n\r\nexport function loginWithJwt(jwt){\r\n\tlocalStorage.setItem(tokenKey, jwt);\r\n}\r\n\r\nexport async function logout(){\r\n\tlocalStorage.removeItem(tokenKey);\r\n}\r\n\r\nexport function getCurrentUser(){\r\n\ttry{\r\n\t\tconst jwt = localStorage.getItem(\"token\");\r\n\t\treturn jwtDecode(jwt);\r\n\t}\r\n\tcatch(ex){\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nexport function getJwt(){\r\n\t//const jwt = localStorage.getItem(tokenKey);\r\n\t//return jwt;\r\n}\r\n\r\nexport default{\r\n\tlogin,\r\n\tconfirmLogin,\r\n\tloginWithJwt,\r\n\tlogout,\r\n\tgetCurrentUser,\r\n\tgetJwt\r\n}"]},"metadata":{},"sourceType":"module"}